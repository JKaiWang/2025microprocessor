# 📚 微處理機原理與應用實作期末考題目總整理 (2021, 2023, 2024)

## 📅 2021年期末考題目整理

### 1. UART 模式與伺服馬達控制 (40%)

* **元件：** UART、鍵盤輸入、按鈕 (RB0)、伺服馬達。
* **共同定義：** 輸入 $n$ ($1 \le n \le 9$)，表示從 $-90^{\circ}$ $\to$ $90^{\circ}$ $\to$ $-90^{\circ}$ 共 $2n$ 個等大小步長。

#### 1. (a) **"model" 模式 (20%)**
* **進入：** 輸入 `"model"`。
* **控制：** **手動步進**。每按一次按鈕 (RB0)，馬達改變一個步長。
* **退出：** 完成 $2n$ 步後退出模式。

#### 1. (b) **"mode2" 模式 (20%)**
* **進入：** 輸入 `"mode2"`。
* **控制：** **自動旋轉**。按下按鈕 (RB0) 後，馬達開始自動旋轉。
* **間隔：** 每個步長間隔 $1$ 秒（需使用計時器）。
* **退出：** 完成 $2n$ 步後退出模式。

### 2. 中斷控制與 UART 計時器 (40%)

#### 2. (a) **按鈕中斷切換 LED (10%)**
* **元件：** 按鈕 (RB0/INT0)、LED (RD0)。
* **操作：** 使用**中斷**處理按鈕事件，切換 LED 亮滅狀態。

#### 2. (b) **UART 顯示計時器 (30%)**
* **元件：** UART、按鈕、LED、TIMER1。
* **流程：**
    1.  初始顯示 `"Timer: 00"`。
    2.  第一次按按鈕：**打開 LED**，使用 TIMER1 每秒中斷，更新螢幕上的計時值。
    3.  第二次按按鈕：**關閉 LED**，添加換行，返回步驟 1。
* **提示：** 可使用 `'\b'` (backspace) 修改螢幕上的計時字串。

### 3. 可變電阻與伺服馬達/燈泡控制 (40%)

#### 3. (a) **可變電阻控制角度與燈泡 (10%)**
* **元件：** 可變電阻 (RA0)、5 個燈泡 (RD0 $\sim$ RD4)、伺服馬達 (CCP1)。
* **操作：** 旋轉可變電阻，馬達從 $-90^{\circ}$ 到 $+90^{\circ}$。燈泡根據角度依序點亮 (請參考原始文件中的表格對應)。

#### 3. (b) **UART 控制伺服馬達系統 (30%)**
* **模式切換：** 使用按鈕中斷切換模式 (Initial $\to$ Mode 1 $\to$ Mode 2 $\to$ Mode 1...)。
* **模式 1 ("model")：** 顯示 `"model"`。功能與 3. (a) 相同。**UART 輸出**每 $0.5$ 秒顯示當前角度。
* **模式 2 ("mode2")：** 顯示 `"mode2"`。**UART 輸入**角度，馬達轉到該角度，燈泡依 3. (a) 規則點亮。

---

## 📅 2023年期末考題目整理

### 1. 可變電阻控制 LED 閃爍頻率 (35%)

* **元件：** 可變電阻、一個 LED。
* **閃爍狀態：** State\_1 ($1$ 秒)、State\_2 ($0.5$ 秒)、State\_3 ($0.25$ 秒)。

#### 1. (a) **LED 閃爍狀態控制 (20%)**
* **操作：** 調整可變電阻，切換三種閃爍頻率。

#### 1. (b) **UART 顯示閃爍狀態與計數 (15%)**
* **操作：** 閃爍頻率與 (a) 相同。每次閃爍發生時，在 Putty 上顯示**當前狀態**和**累積閃爍次數** (例如：`State_1 count = 1`)。

### 2. 按鈕或 UART 控制馬達循環模式 (35%)

* **元件：** 馬達。

#### 2. (a) **按鈕切換馬達循環模式 (20%)**
* **控制：** 按鈕切換模式（初始為 Mode 1）。
* **模式 1：** 馬達 $-45^{\circ}$ $\leftrightarrow$ $45^{\circ}$ $\leftrightarrow$ $-45^{\circ}$ 連續循環。
* **模式 2：** 馬達 $-90^{\circ}$ $\leftrightarrow$ $90^{\circ}$ $\leftrightarrow$ $-90^{\circ}$ 連續循環。

#### 2. (b) **UART 控制馬達循環模式 (15%)**
* **控制：** UART 輸入 `'mode1'` 或 `'mode2'`。
* **模式 1 (輸入 'mode1')：** $-90^{\circ}$ $\to$ $+90^{\circ}$，然後**直接**重設回 $-90^{\circ}$，連續循環。
* **模式 2 (輸入 'mode2')：** $-90^{\circ}$ $\to$ $+90^{\circ}$ $\to$ **平滑地**減少角度返回 $-90^{\circ}$，重複循環。
* **注意：** Mode 2 的 $+90^{\circ}$ $\to$ $-90^{\circ}$ 過渡需有**明顯較慢**的延遲。

### 3. 可變電阻或 UART 數值控制 (30%)

#### 3. (a) **可變電阻控制馬達角度映射 (20%)**
* **元件：** 可變電阻 (10-bit)、馬達。
* **映射：** 將 $0 \sim 1023$ (10-bit ADC) 線性映射到馬達角度 $0^{\circ} \sim 90^{\circ}$。

#### 3. (b) **UART 顯示除法結果 (10%)**
* **元件：** UART、可變電阻 (10-bit)。
* **操作：** 整數 $X$ 初始 $100$ ($10 \le X \le 600$)，可透過 UART 更新 $X$。
* **輸出：** 顯示 (可變電阻值 / $X$) 的結果。

---

## 📅 2024年期末考題目整理

### 1. 按鈕或 UART 控制 LED 循序燈 (35%)

* **元件：** 三個 LED。
* **時間間隔狀態：** State 1 ($0.25$ 秒)、State 2 ($0.5$ 秒)、State 3 ($1$ 秒)。

#### 1. (a) **按鈕切換循序燈時間間隔 (20%)**
* **元件：** 按鈕。
* **操作：** 按鈕切換三個 LED 循序點亮的時間間隔狀態 ($1 \to 2 \to 3 \to 1 \to \dots$)。

#### 1. (b) **UART 設置計數器與時間間隔 (15%)**
* **操作：** 透過 UART 輸入兩個數字（空格分隔，換行執行）。
    * **第一個數字 (1-3)：** 設定時間間隔狀態。
    * **第二個數字 (1-7, $n$)：** 設定倒數起始點 $n$。
* **功能：** 三個 LED (3-bit 二進制) 以設定的時間間隔從 $n$ **倒數**到 $0$。

### 2. 按鈕控制馬達循環或步進 (35%)

* **元件：** 馬達、按鈕。

#### 2. (a) **按鈕切換馬達循環範圍 (20%)**
* **控制：** 按鈕切換兩種連續循環模式。
* **模式 1：** $+90^{\circ}$ $\to$ $-90^{\circ}$ $\to$ **直接反向**回 $+90^{\circ}$。
* **模式 2：** $+90^{\circ}$ $\to$ $0^{\circ}$ $\to$ **直接反向**回 $+90^{\circ}$。

#### 2. (b) **按鈕控制馬達步進與邊界反向 (15%)**
* **初始設定：** 初始位置 $X^{\circ}$，初始方向為**逆時針**。
* **步進：** 按鈕按下時，馬達依序旋轉 $45^{\circ} \to 90^{\circ} \to 180^{\circ}$，然後重複。
* **邊界：** 一旦馬達達到 $+90^{\circ}$ 或 $-90^{\circ}$，旋轉方向**反轉**。

### 3. 可變電阻控制跑馬燈與 UART 輸出/緩衝 (35%)

* **元件：** 可變電阻、三個 LED、UART。

#### 3. (a) **可變電阻控制跑馬燈方向 (20%)**
* **操作：** 三個 LED 依序點亮（跑馬燈）。跑馬燈的**方向**根據可變電阻的旋轉而改變。

#### 3. (b) **UART 輸出與狀態緩衝 (15%)**
* **功能 1 (5%)：** LED 狀態改變時，使用 `'L'` (light) 和 `'D'` (dark) 輸出狀態字串（例如 `'DLL'`），每行一個結果。
* **功能 2 (10%)：** 透過 UART 輸入整數 $X$ ($0 < X < 10^9$)，新狀態更新為 $(\text{當前狀態} + X) \pmod 7$。輸入 $X$ 時可變電阻需靜止。